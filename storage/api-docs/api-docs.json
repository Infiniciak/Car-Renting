{
    "openapi": "3.0.0",
    "info": {
        "title": "Car Rental API",
        "description": "Dokumentacja systemu wypożyczalni",
        "version": "1.0.0"
    },
    "paths": {
        "/admin/stats": {
            "get": {
                "tags": [
                    "Admin Stats"
                ],
                "summary": "Pobierz ogólne statystyki floty",
                "operationId": "getAdminStatsIndex",
                "responses": {
                    "200": {
                        "description": "Zwraca statystyki paliwa, miast, typów aut i dane ogólne",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "by_type": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "avg_prices": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "fuel_stats": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "city_stats": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "general": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/admin/stats/revenue": {
            "get": {
                "tags": [
                    "Admin Stats"
                ],
                "summary": "Pobierz statystyki przychodów",
                "operationId": "getAdminRevenueStats",
                "responses": {
                    "200": {
                        "description": "Dane o przychodach netto, brutto i zwrotach",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/admin/stats/revenue-monthly": {
            "get": {
                "tags": [
                    "Admin Stats"
                ],
                "summary": "Przychody w rozbiciu na miesiące",
                "operationId": "getAdminRevenueMonthly",
                "responses": {
                    "200": {
                        "description": "Wykres miesięczny"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/admin/stats/revenue-by-point": {
            "get": {
                "tags": [
                    "Admin Stats"
                ],
                "summary": "Ranking punktów pod kątem przychodów",
                "operationId": "getAdminRevenueByPoint",
                "responses": {
                    "200": {
                        "description": "Lista punktów"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/admin/stats/top-users": {
            "get": {
                "tags": [
                    "Admin Stats"
                ],
                "summary": "Najlepsi klienci",
                "operationId": "getAdminTopUsers",
                "responses": {
                    "200": {
                        "description": "Lista użytkowników"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/admin/stats/discounts": {
            "get": {
                "tags": [
                    "Admin Stats"
                ],
                "summary": "Statystyki udzielonych rabatów",
                "operationId": "getAdminDiscountStats",
                "responses": {
                    "200": {
                        "description": "Dane o zniżkach"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/admin/cars": {
            "get": {
                "tags": [
                    "Admin Cars"
                ],
                "summary": "Pobierz pełną listę aut",
                "operationId": "getAdminCarsList",
                "responses": {
                    "200": {
                        "description": "Lista wszystkich samochodów",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Car"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Admin Cars"
                ],
                "summary": "Dodaj nowy pojazd",
                "operationId": "storeCar",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "brand",
                                    "model",
                                    "year",
                                    "registration_number",
                                    "price_per_day",
                                    "type",
                                    "fuel_type",
                                    "transmission"
                                ],
                                "properties": {
                                    "brand": {
                                        "type": "string",
                                        "example": "Audi"
                                    },
                                    "model": {
                                        "type": "string",
                                        "example": "A6"
                                    },
                                    "year": {
                                        "type": "integer",
                                        "example": 2024
                                    },
                                    "registration_number": {
                                        "type": "string",
                                        "example": "KR12345"
                                    },
                                    "type": {
                                        "type": "string",
                                        "example": "sedan"
                                    },
                                    "fuel_type": {
                                        "type": "string",
                                        "example": "petrol"
                                    },
                                    "transmission": {
                                        "type": "string",
                                        "example": "automatic"
                                    },
                                    "seats": {
                                        "type": "integer",
                                        "example": 5
                                    },
                                    "price_per_day": {
                                        "type": "number",
                                        "format": "float",
                                        "example": 299.99
                                    },
                                    "status": {
                                        "type": "string",
                                        "example": "available"
                                    },
                                    "rental_point_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "has_gps": {
                                        "type": "boolean",
                                        "example": true
                                    },
                                    "has_air_conditioning": {
                                        "type": "boolean",
                                        "example": true
                                    },
                                    "image": {
                                        "description": "Plik obrazu",
                                        "type": "string",
                                        "format": "binary"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Auto dodane"
                    },
                    "422": {
                        "description": "Błąd walidacji"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/admin/cars/{id}": {
            "post": {
                "tags": [
                    "Admin Cars"
                ],
                "summary": "Aktualizuj pojazd (Multipart)",
                "description": "Używamy POST z _method=PUT dla obsługi plików",
                "operationId": "updateCar",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "properties": {
                                    "_method": {
                                        "type": "string",
                                        "example": "PUT"
                                    },
                                    "brand": {
                                        "type": "string"
                                    },
                                    "model": {
                                        "type": "string"
                                    },
                                    "remove_image": {
                                        "type": "string",
                                        "example": "1"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Zaktualizowano"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Admin Cars"
                ],
                "summary": "Usuń pojazd",
                "operationId": "deleteCar",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Usunięto"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/admin/promo-codes": {
            "get": {
                "tags": [
                    "Promo Codes"
                ],
                "summary": "Lista wszystkich kodów promocyjnych",
                "operationId": "getAdminPromoCodes",
                "responses": {
                    "200": {
                        "description": "Paginowana lista kodów wraz z relacjami",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Promo Codes"
                ],
                "summary": "Generowanie nowego kodu dla użytkownika",
                "operationId": "storeAdminPromoCode",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "user_id",
                                    "amount"
                                ],
                                "properties": {
                                    "user_id": {
                                        "description": "ID użytkownika, do którego trafi kod",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "amount": {
                                        "type": "number",
                                        "format": "float",
                                        "maximum": 10000,
                                        "minimum": 1,
                                        "example": 50
                                    },
                                    "expires_at": {
                                        "type": "string",
                                        "format": "date-time",
                                        "example": "2025-12-31 23:59:59",
                                        "nullable": true
                                    },
                                    "description": {
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Bonus świąteczny",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Kod utworzony pomyślnie",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Błąd walidacji"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/admin/promo-codes/{id}": {
            "delete": {
                "tags": [
                    "Promo Codes"
                ],
                "summary": "Usuwanie kodu promocyjnego",
                "operationId": "deleteAdminPromoCode",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID kodu",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Kod usunięty"
                    },
                    "422": {
                        "description": "Nie można usunąć użytego kodu"
                    },
                    "404": {
                        "description": "Kod nie istnieje"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/admin/rentals": {
            "get": {
                "tags": [
                    "Admin Rentals"
                ],
                "summary": "Lista wszystkich wynajmów",
                "description": "Zwraca paginowaną listę wynajmów z możliwością filtrowania po statusie, użytkowniku lub punkcie.",
                "operationId": "getAdminRentals",
                "parameters": [
                    {
                        "name": "status",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "user_id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "rental_point_id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Paginowana lista wynajmów"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Admin Rentals"
                ],
                "summary": "Utwórz nowy wynajem/rezerwację (ręcznie)",
                "operationId": "storeAdminRental",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "user_id",
                                    "car_id",
                                    "rental_point_start_id",
                                    "rental_point_end_id",
                                    "start_date",
                                    "planned_end_date"
                                ],
                                "properties": {
                                    "user_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "car_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "rental_point_start_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "rental_point_end_id": {
                                        "type": "integer",
                                        "example": 2
                                    },
                                    "start_date": {
                                        "type": "string",
                                        "format": "date-time"
                                    },
                                    "planned_end_date": {
                                        "type": "string",
                                        "format": "date-time"
                                    },
                                    "use_extra_insurance": {
                                        "type": "boolean",
                                        "default": false
                                    },
                                    "notes": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Wynajem utworzony"
                    },
                    "422": {
                        "description": "Błąd walidacji, brak środków lub auto zajęte"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/admin/rentals/{id}": {
            "get": {
                "tags": [
                    "Admin Rentals"
                ],
                "summary": "Szczegóły konkretnego wynajmu",
                "operationId": "getAdminRentalById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Pełne dane o wynajmie i transakcjach"
                    },
                    "404": {
                        "description": "Nie znaleziono wynajmu"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Admin Rentals"
                ],
                "summary": "Usuń rekord wynajmu",
                "operationId": "deleteAdminRental",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Usunięto"
                    },
                    "422": {
                        "description": "Nie można usunąć aktywnego wynajmu"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Admin Rentals"
                ],
                "summary": "Edycja danych wynajmu",
                "operationId": "updateAdminRental",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "active",
                                            "completed",
                                            "cancelled",
                                            "early_return"
                                        ]
                                    },
                                    "notes": {
                                        "type": "string"
                                    },
                                    "rental_point_end_id": {
                                        "type": "integer"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Zaktualizowano"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/admin/rentals/{id}/cancel": {
            "post": {
                "tags": [
                    "Admin Rentals"
                ],
                "summary": "Anulowanie rezerwacji lub wczesny zwrot",
                "operationId": "cancelAdminRental",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "cancellation_reason"
                                ],
                                "properties": {
                                    "cancellation_reason": {
                                        "type": "string",
                                        "example": "Zmiana planów"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Sukces - zwrócono środki"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/admin/rentals/{id}/approve-return": {
            "post": {
                "tags": [
                    "Admin Rentals"
                ],
                "summary": "Zatwierdzenie zwrotu auta",
                "operationId": "approveAdminRentalReturn",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "notes": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Zwrot zatwierdzony"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/admin/rentals/{id}/reject-return": {
            "post": {
                "tags": [
                    "Admin Rentals"
                ],
                "summary": "Odrzucenie zwrotu auta",
                "operationId": "rejectAdminRentalReturn",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "reason": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Zwrot odrzucony"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/cars": {
            "get": {
                "tags": [
                    "Public Cars"
                ],
                "summary": "Pobierz listę dostępnych samochodów",
                "description": "Zwraca listę samochodów o statusie 'available' z paginacją oraz wyliczonymi stawkami ubezpieczeń.",
                "operationId": "getPublicCarsList",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Wyszukiwanie po marce lub modelu",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "max_price",
                        "in": "query",
                        "description": "Maksymalna cena za dobę",
                        "required": false,
                        "schema": {
                            "type": "number",
                            "format": "float"
                        }
                    },
                    {
                        "name": "fuel_type",
                        "in": "query",
                        "description": "Typ paliwa",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "rental_point_id",
                        "in": "query",
                        "description": "ID punktu odbioru",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "type",
                        "in": "query",
                        "description": "Typ nadwozia",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "transmission",
                        "in": "query",
                        "description": "Rodzaj skrzyni biegów",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "seats",
                        "in": "query",
                        "description": "Minimalna liczba miejsc",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "has_gps",
                        "in": "query",
                        "description": "Czy posiada GPS (true/false)",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "has_air_conditioning",
                        "in": "query",
                        "description": "Czy posiada klimatyzację (true/false)",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Pomyślnie pobrano listę",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Car"
                                            }
                                        },
                                        "current_page": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "last_page": {
                                            "type": "integer",
                                            "example": 5
                                        },
                                        "total": {
                                            "type": "integer",
                                            "example": 45
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Błąd serwera"
                    }
                }
            }
        },
        "/cars/{id}": {
            "get": {
                "tags": [
                    "Public Cars"
                ],
                "summary": "Pobierz szczegóły konkretnego samochodu",
                "operationId": "getPublicCarById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID samochodu",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Szczegóły samochodu",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Car"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Nie znaleziono pojazdu"
                    }
                }
            }
        },
        "/rentals/stats": {
            "get": {
                "tags": [
                    "User Rentals"
                ],
                "summary": "Pobierz statystyki lojalnościowe użytkownika",
                "operationId": "getUserRentalStats",
                "responses": {
                    "200": {
                        "description": "Zwraca liczbę wynajmów i info o nadchodzących zniżkach",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "completed_rentals": {
                                            "type": "integer"
                                        },
                                        "next_discount": {
                                            "description": "Wartość % następnej zniżki",
                                            "type": "integer"
                                        },
                                        "rentals_until_discount": {
                                            "type": "integer"
                                        },
                                        "balance": {
                                            "type": "number"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/rentals/calculate": {
            "post": {
                "tags": [
                    "User Rentals"
                ],
                "summary": "Oblicz koszt wynajmu przed złożeniem zamówienia",
                "operationId": "calculateRentalPrice",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "car_id",
                                    "rental_point_start_id",
                                    "rental_point_end_id",
                                    "start_date",
                                    "planned_end_date"
                                ],
                                "properties": {
                                    "car_id": {
                                        "type": "integer"
                                    },
                                    "rental_point_start_id": {
                                        "type": "integer"
                                    },
                                    "rental_point_end_id": {
                                        "type": "integer"
                                    },
                                    "start_date": {
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "planned_end_date": {
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "use_extra_insurance": {
                                        "type": "boolean"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Szczegółowa kalkulacja ceny"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/rentals": {
            "post": {
                "tags": [
                    "User Rentals"
                ],
                "summary": "Stwórz nową rezerwację lub rozpocznij wynajem",
                "operationId": "storeUserRental",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "car_id": {
                                        "type": "integer"
                                    },
                                    "rental_point_start_id": {
                                        "type": "integer"
                                    },
                                    "rental_point_end_id": {
                                        "type": "integer"
                                    },
                                    "start_date": {
                                        "type": "string",
                                        "format": "date-time"
                                    },
                                    "planned_end_date": {
                                        "type": "string",
                                        "format": "date-time"
                                    },
                                    "use_extra_insurance": {
                                        "type": "boolean"
                                    },
                                    "notes": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Wynajem rozpoczęty / zarezerwowany"
                    },
                    "422": {
                        "description": "Brak środków lub auto niedostępne"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/rentals/my": {
            "get": {
                "tags": [
                    "User Rentals"
                ],
                "summary": "Lista wypożyczeń zalogowanego użytkownika",
                "operationId": "getMyRentals",
                "responses": {
                    "200": {
                        "description": "Paginowana lista wynajmów"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/rentals/{id}/cancel": {
            "post": {
                "tags": [
                    "User Rentals"
                ],
                "summary": "Anulowanie rezerwacji lub wczesny zwrot przez użytkownika",
                "operationId": "cancelUserRental",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Zwrócono środki na saldo"
                    },
                    "422": {
                        "description": "Nie można już anulować"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/rentals/{id}/request-return": {
            "post": {
                "tags": [
                    "User Rentals"
                ],
                "summary": "Zgłoszenie zwrotu pojazdu do weryfikacji",
                "operationId": "requestReturnUser",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Status zmieniony na pending_return"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/test-swagger": {
            "get": {
                "summary": "Test endpoint",
                "operationId": "ac4edae10eb98e6c12a74d8fd48698d0",
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                },
                "servers": [
                    {
                        "url": "http://localhost:8001/api",
                        "description": "Local Server"
                    }
                ]
            }
        },
        "/profile": {
            "get": {
                "tags": [
                    "User Profile"
                ],
                "summary": "Pobierz dane profilu",
                "operationId": "getUserProfile",
                "responses": {
                    "200": {
                        "description": "Zwraca dane zalogowanego użytkownika"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "User Profile"
                ],
                "summary": "Zaktualizuj dane profilu",
                "operationId": "updateUserProfile",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Jan Kowalski"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "jan@example.com"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "minLength": 8,
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Dane zaktualizowane"
                    },
                    "422": {
                        "description": "Błąd walidacji"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/profile/redeem-code": {
            "post": {
                "tags": [
                    "User Profile"
                ],
                "summary": "Zrealizuj kod promocyjny (wpisywany ręcznie)",
                "operationId": "redeemPromoCode",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "code"
                                ],
                                "properties": {
                                    "code": {
                                        "type": "string",
                                        "example": "BONUS2024"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Konto doładowane"
                    },
                    "404": {
                        "description": "Nieprawidłowy kod"
                    },
                    "422": {
                        "description": "Kod wygasł lub użyty"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/profile/codes": {
            "get": {
                "tags": [
                    "User Profile"
                ],
                "summary": "Lista kodów przypisanych do użytkownika",
                "operationId": "getUserPromoCodes",
                "responses": {
                    "200": {
                        "description": "Lista kodów"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/profile/codes/{id}/use": {
            "post": {
                "tags": [
                    "User Profile"
                ],
                "summary": "Zrealizuj kod przypisany do konta (przez ID)",
                "operationId": "useAssignedPromoCode",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Konto doładowane"
                    },
                    "403": {
                        "description": "Kod nie należy do użytkownika"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "Car": {
                "title": "Car",
                "description": "Model reprezentujący pojazd w systemie",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "brand": {
                        "type": "string",
                        "example": "Audi"
                    },
                    "model": {
                        "type": "string",
                        "example": "A6"
                    },
                    "year": {
                        "type": "integer",
                        "example": 2026
                    },
                    "registration_number": {
                        "type": "string",
                        "example": "RZ12345"
                    },
                    "type": {
                        "type": "string",
                        "example": "SUV"
                    },
                    "fuel_type": {
                        "type": "string",
                        "example": "petrol"
                    },
                    "transmission": {
                        "type": "string",
                        "example": "automatic"
                    },
                    "seats": {
                        "type": "integer",
                        "example": 5
                    },
                    "price_per_day": {
                        "type": "number",
                        "format": "float",
                        "example": 299.99
                    },
                    "insurance_per_day": {
                        "description": "Podstawowe ubezpieczenie (5% ceny)",
                        "type": "number",
                        "format": "float",
                        "example": 15
                    },
                    "extra_insurance_per_day": {
                        "description": "Wyliczona stawka AC Premium",
                        "type": "number",
                        "format": "float",
                        "example": 45.5
                    },
                    "status": {
                        "type": "string",
                        "example": "available"
                    },
                    "image_path": {
                        "type": "string",
                        "example": "cars/audi_a6.jpg",
                        "nullable": true
                    },
                    "description": {
                        "type": "string",
                        "nullable": true
                    },
                    "has_gps": {
                        "type": "boolean",
                        "example": true
                    },
                    "has_air_conditioning": {
                        "type": "boolean",
                        "example": true
                    },
                    "rental_point_id": {
                        "type": "integer",
                        "example": 1
                    }
                },
                "type": "object"
            },
            "PromoCode": {
                "title": "PromoCode",
                "description": "Model reprezentujący kod promocyjny doładowujący saldo użytkownika",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "code": {
                        "type": "string",
                        "example": "RENT-A1B2-C3D4"
                    },
                    "amount": {
                        "type": "number",
                        "format": "float",
                        "example": 50
                    },
                    "used": {
                        "type": "boolean",
                        "example": false
                    },
                    "used_by_user_id": {
                        "type": "integer",
                        "example": 5,
                        "nullable": true
                    },
                    "used_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "created_by_admin_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "expires_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "description": {
                        "type": "string",
                        "example": "Bonus lojalnościowy",
                        "nullable": true
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "active",
                            "used",
                            "expired"
                        ],
                        "example": "active"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                },
                "type": "object"
            },
            "Rental": {
                "title": "Rental",
                "description": "Model reprezentujący wypożyczenie pojazdu",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "user_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "car_id": {
                        "type": "integer",
                        "example": 5
                    },
                    "rental_point_start_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "rental_point_end_id": {
                        "type": "integer",
                        "example": 2
                    },
                    "start_date": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "planned_end_date": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "actual_end_date": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "distance_km": {
                        "type": "number",
                        "format": "float",
                        "example": 120.5
                    },
                    "base_price": {
                        "type": "number",
                        "format": "float",
                        "example": 500
                    },
                    "insurance_price": {
                        "type": "number",
                        "format": "float",
                        "example": 50
                    },
                    "distance_fee": {
                        "type": "number",
                        "format": "float",
                        "example": 241
                    },
                    "discount_amount": {
                        "type": "number",
                        "format": "float",
                        "example": 25
                    },
                    "total_price": {
                        "type": "number",
                        "format": "float",
                        "example": 766
                    },
                    "refund_amount": {
                        "type": "number",
                        "format": "float",
                        "example": 0
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "reserved",
                            "active",
                            "pending_return",
                            "completed",
                            "cancelled",
                            "early_return"
                        ]
                    },
                    "user_rental_count": {
                        "type": "integer",
                        "example": 3
                    },
                    "notes": {
                        "type": "string",
                        "nullable": true
                    },
                    "cancellation_reason": {
                        "type": "string",
                        "nullable": true
                    }
                },
                "type": "object"
            }
        }
    },
    "tags": [
        {
            "name": "Admin Stats",
            "description": "Statystyki i raporty dla panelu administratora"
        },
        {
            "name": "Admin Cars",
            "description": "Zarządzanie flotą pojazdów (Admin)"
        },
        {
            "name": "Promo Codes",
            "description": "Zarządzanie kodami promocyjnymi przez administratora"
        },
        {
            "name": "Admin Rentals",
            "description": "Zarządzanie wynajmami i rezerwacjami z poziomu panelu administratora"
        },
        {
            "name": "Public Cars",
            "description": "Operacje na samochodach dostępne dla każdego użytkownika"
        },
        {
            "name": "User Rentals",
            "description": "Obsługa wypożyczeń po stronie klienta"
        },
        {
            "name": "User Profile",
            "description": "Zarządzanie profilem użytkownika i portfelem"
        }
    ]
}